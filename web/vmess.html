<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Buat Akun VMess</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

  <!-- Header -->
  <div class="bg-blue-600 text-white text-center py-4 text-xl font-semibold">
    âœ… VMess Created
  </div>

  <!-- Form Input -->
  <div class="max-w-md mx-auto mt-6 p-4 bg-white rounded shadow space-y-4">
    <input id="ipPort" type="text" placeholder="Masukkan IP:Port (contoh: 104.26.14.14:443)" class="w-full border p-2 rounded" />
    <input id="domain" type="text" placeholder="Domain (contoh: bug.cloudflare.com)" class="w-full border p-2 rounded" />
    <input id="bug" type="text" placeholder="Bug Wildcard (contoh: cdn.cloudflare.net)" class="w-full border p-2 rounded" />
    <button onclick="generateVMess()" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">
      ğŸ”§ Buat Akun
    </button>
  </div>

  <!-- Hasil -->
  <div id="result" class="max-w-md mx-auto mt-4 p-4 bg-white rounded shadow hidden space-y-3 text-sm">
    <div>ğŸŒ Remark: <span id="remarks" class="font-semibold"></span></div>
    <div>ğŸ“¡ Domain: <span id="res-domain"></span></div>
    <div>ğŸ SNI/Bug: <span id="res-bug"></span></div>
    <div>ğŸ†” UUID: <span id="uuid">aaaaaaa1-bbbb-4ccc-addd-eeeeeeeeeee1</span></div>
    <div>ğŸšª Port: <span id="res-port"></span></div>
    <div>ğŸ” TLS: TLS</div>
    <div>ğŸ“ Path: <span id="path"></span></div>
    <div>ğŸ”— Link:
      <textarea readonly id="vmess-link" class="w-full mt-1 p-2 bg-gray-100 rounded text-xs"></textarea>
    </div>
    <div class="text-center">
      <img id="qrcode" src="" alt="QR Code" class="mx-auto my-2 rounded shadow" />
      <button onclick="copyConfig()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
        ğŸ“‹ Salin Konfigurasi
      </button>
    </div>
  </div>

  <!-- Script -->
  <script>
    async function generateVMess() {
Â  const ipPort = document.getElementById('ipPort').value.trim();
Â  const domain = document.getElementById('domain').value.trim();
Â  const bug = document.getElementById('bug').value.trim();
Â  const resultBox = document.getElementById('result');

Â  if (!ipPort || !domain || !bug || !ipPort.includes(':')) {
Â  Â  alert('Isi semua field dengan benar.');
Â  Â  return;
Â  }

Â  const [ip, port] = ipPort.split(':');
Â  const uuid = 'aaaaaaa1-bbbb-4ccc-addd-eeeeeeeeeee1';
Â  const path = `/Club-Gratis/${ip}-${port}`;

Â  try {
Â  Â  const res = await fetch(`https://api-checker.aquamarinelavinia.workers.dev/?ip=${ip}:${port}`);
Â  Â  const data = await res.json();
Â  Â  console.log("Response dari API:", data);

Â  Â  if (!data.message || !data.message.includes('ACTIVE')) {
Â  Â  Â  alert('Proxy tidak aktif!');
Â  Â  Â  return;
Â  Â  }

Â  Â  const remarks = `${data.country || 'Unknown'} ${data.flag || ''} [${data.isp || 'Unknown ISP'}]`;

Â  Â  const linkObject = {
Â  Â  Â  v: "2",
Â  Â  Â  ps: remarks,
Â  Â  Â  add: bug,
Â  Â  Â  port: "443",
Â  Â  Â  id: uuid,
Â  Â  Â  aid: "0",
Â  Â  Â  net: "ws",
Â  Â  Â  type: "none",
Â  Â  Â  host: domain,
Â  Â  Â  path: path,
Â  Â  Â  tls: "tls",
Â  Â  Â  scy: "zero"
Â  Â  };

Â  Â  const vmessLink = "vmess://" + btoa(JSON.stringify(linkObject));

Â  Â  document.getElementById('remarks').textContent = remarks;
Â  Â  document.getElementById('res-domain').textContent = domain;
Â  Â  document.getElementById('res-bug').textContent = bug;
Â  Â  document.getElementById('res-port').textContent = port;
Â  Â  document.getElementById('path').textContent = path;
Â  Â  document.getElementById('vmess-link').value = vmessLink;
Â  Â  document.getElementById('qrcode').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(vmessLink)}`;
Â  Â  resultBox.classList.remove('hidden');

Â  } catch (err) {
Â  Â  alert('Gagal mengambil data proxy.');
Â  Â  console.error('Error:', err);
Â  }
}
    function copyConfig() {
      const link = document.getElementById('vmess-link');
      link.select();
      document.execCommand('copy');
      alert('Konfigurasi berhasil disalin!');
    }
  </script>
</body>
</html>
